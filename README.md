<h1 align="center">Описание работы мобильного приложения <em> Sport with friends</em>, сделанного в рамках дипломной работы </h1>

Приложение позволяет авторизированным пользователям взаимодействовать с тренировками (выбор уже существующих тренировок, добавление новых), с другими пользователями (добавление в друзья, переписка), со спортивными новостями (просмотр), со своим профилем.

# Функции приложения
## Авторизация
При первом открытии приложения, система проверяет, зарегистрирован ли текущий пользователь. Если пользователь зарегистрирован и его данные сохранены в памяти телефона, то он попадет в [главное меню](#main-menu). Иначе он попадает в окно регистрации ([RegisteredActivity.java](#registered)). Далее пользователю предлагается ввести свои данные, такие как почта, имя и пароль.  
<div align="center"><img src="https://user-images.githubusercontent.com/79999380/229246324-cd5cfe67-4e15-43a6-9c8a-c81d7b29ed7f.png" alt="Окно регистрации" height="500"/></div>

Если у пользователя уже есть аккаунт, он может перейти в окно входа ([LogInActivity.java](#login)). Здесь пользователю предлагается ввести почту и пароль, которые он указывал при регистрации.  
<div align="center"><img src="https://user-images.githubusercontent.com/79999380/229246528-f29753ec-fd08-4c10-8c12-0a78702e688e.png" alt="Окно входа" height="500"/></div>  

## Главный экран  <a name="main-menu"></a>
Пользователь попадает в окно главного экрана ([MainScreenActivity.java](#main-screen)). В этом окне доступны все основные действия, поддерживаемые приложением.   

Также пользователю предоставляется нижнее меню, по которому он может переключаться между вкладками.

![Нижнее меню](https://user-images.githubusercontent.com/79999380/229222640-f29a79a3-a887-45ab-9e76-074857406ade.jpg "Нижнее меню")

Главный экран изначально открывается на вкладке новости ([NewsFragment.java](#news)). Здесь пользователь может просмотреть различные спортивные новости.  

<div align="center">
<img src="https://user-images.githubusercontent.com/79999380/229285391-a312777e-c730-4436-84fa-ecd0cbf609e7.jpg" alt="Окно новостей" height="500"/>
</div>  

Далее пользователь может перейти на вкладку друзья ([FriendsFragment.java](#friends)).  
Если изначально у пользователя нет друзей, то ему предоставляется [поиск](#search-main), в котором он может по имени найти конкретного пользователя.  

<table align="center">
  <tr>
    <td><img src="https://user-images.githubusercontent.com/79999380/229285515-19ce51d4-fee2-4996-98e7-3392ca9c17ff.jpg" alt="Мои друзья" height="500"></td>
    <td><img src="https://user-images.githubusercontent.com/79999380/229285523-b8264364-69c1-4dc2-b258-96c879aa4f4b.jpg" alt="Нет друзей" height="500"></td>
  </tr>
</table>

Следующая вкладка содержит в себе список тренировок ([ExerciseFragment.java](#exercise)).  

<div align="center">
<img src="https://user-images.githubusercontent.com/79999380/229285779-cf935ff2-609d-450e-8f47-2e3b9757380b.jpg" alt="Окно тренировок" height="500"/>
</div> 

Если ни у пользователя, ни у его друзей нет тренировок, то ему предлагается [поиск](#search-main).  
Пользователь может просмотреть тренировки друзей или создать свою ([AddExerciseActivity.java](#add-exercise)).  
При создании своей тренировки пользователь должен заполнить поля:
* Текстовое поле "Заголовок" - название тренировки
* Текстовое поле "Описание" - описание тренировки
* Кнопка "Установить дату" - выводится календарь с выбором даты
* Кнопка "Установить время" - выводится циферблат для выбора времени
* Текстовое поле "Место" - указание места проведения тренировки
* Выпадающий список "Тип" - выводятся возможные типы тренировки
* Текстовое поле "Кол-во участников" - указание кол-ва участников

<div align="center">
<img src="https://user-images.githubusercontent.com/79999380/229285879-7be6dca4-7b1a-4210-a905-b838c42aff33.jpg" alt="Добавление тренировки" height="500"/>
</div>  

<table align="center">
  <tr>
    <td><img src="https://user-images.githubusercontent.com/79999380/229285907-f59b2b98-e232-46d8-b24a-a7f284979ba7.jpg" alt="Окно выбора даты" height="500"></td>
    <td><img src="https://user-images.githubusercontent.com/79999380/229285914-b41cbe2c-d819-42a0-9aa3-8b74daa4ff04.jpg" alt="Окно выбора времени" height="500"></td>
  </tr>
</table>

Вкладка сообщения ([MessageActivity.java](#message)) позволяет создавать чаты и переписываться с друзьями. Если не создано ни одного чата, приложение позволяет выбрать друга из списка и начать с ним переписку. (***не реализовано***)

Вкладка профиль ([ProfileFragment.java](#profile)) открывает полный профиль текущего пользователя, который можно редактировать. (***не реализовано***)

## Поиск <a name="search-main"></a>
В приложении реализовано несколько видов поиска:
* Глобальный поиск ([SearchActivity.java](#search)) - окно, в котором можно совершать поиск по нескольким критериям сразу (друзья, тренировки, новости). Также доступен фильтр, благодаря которому возможно отсортировать найденные элементы. (***не реализовано***)
* Поиск по друзьям ([SearchFriendActivity.java](#search-friend)) - этот поиск предоставляется единожды, когда у текущего пользователя ещё нет друзей, и он может найти их в соответствующем окне.
<div align="center">
<img src="https://user-images.githubusercontent.com/79999380/229285992-84cf94f7-7f75-46bf-b228-6fec9173e0a7.jpg" alt="Добавление тренировки" height="350"/>
</div> 

* Поиск по тренировкам ([SearchExercise.java](#search-exercise)) - так же, как и поиск по друзьям, доступен всего один раз, когда ни у текущего пользователя, ни у его друзей ещё нет тренировок. (***не реализовано***)

# Окна приложения
## RegisteredActivity <a name="registered"></a>
При вводе электронной почты происходит проверка в реальном времени на корректность введенной информации. Если почта не соответствует заданым стандартам, показывается соответсвующее сообщение.  
При вводе паролей происходит проверка на их сходство. Если пароли различаются, выводится сообщение об этом.  
При нажатии на кнопку регистрации проверяется корректность данных и после этого новый пользователь записывается в список авторизированных пользователей, затем добавляется в базу данных всех пользователей с помощью сервиса Firebase.  
При нажатии на надпись о входе, пользователю открывается окно входа.
## LogInActivity <a name="login"></a>
При нажатии на кнопку входа проверяется корректность заполненных пользователем полей. Далее с помощью сервиса Firebase сравниваются почта и пароль с уже авторизированными ранее данными, если они совпадают, то открывается главный экран.
При нажатии на надпись о регистрации, пользователю открывается окно регистрации.
## MainScreenActivity <a name="main-screen"></a>
В данном окне реализованно нижнее меню, по которому пользователь может передвигаться. Реализована подгрузка необходимых фрагментов.  
Изначально загружается фрагмент новостей. После этого, в зависимости от нажатой иконки меню, фрагменты меняются местами. При смене фрагментов происходит проверка, если пользователь нажимает на одну и ту же иконку несколько раз подряд, то замена не произойдет. 
## NewsFragment <a name="news"></a>
Содержит в себе recyclerview, в котором отображаются все существующие новости. Приложение получает новости из базы данных, созданной заранее с помощью сервиса Firebase.  
[TODO: *попробовать реализовать собственное API для новостей, чтобы не перегружать сервер*]
## FriendsFragment <a name="friends"></a>
Изначально происходит проверка на существование друзей у текущего пользователя.  
Если друзей нет, то выводится интерактивное сообщение, предлагающее воспользоваться поиском. При нажатии на сообщение, пользователь перейдет в соответствующее окно.  
Если друзья есть, то они получаются из базы данных, созданной с помощью сервиса Firebase и выводятся в элементе recyclerview. У каждого друга есть интерактивная кнопка, позволяющая перейти в окно сообщений.
## ExerciseFragment <a name="exercise"></a>
Происходит проверка, если у пользователя есть тренировки, то они получаются из базы данных, созданной в Firebase и выводятся в recyclerview.  
[TODO: *добавить вывод тренировок друзей и возможность поиска по тренировкам*]  
При нажатии на кнопку добавления, открывается окно создания новой тренировки.
## AddExerciseActivity <a name="add-exercise"></a>
Формируется выпадающий список с типами тренировок. Типы получаются из базы данных с помощью Firebase, записываются в список и вкладываются в элемент spinner.  
Формируются календарь и циферблат для установки даты и времени с помощью классов существующих в языке библиотек.  
При нажатии на кнопку сохранения, происходит проверка корректности заполненных полей, после которой данные записываются в объект Map и добавляются к пользователю в базу данных в поле "exercises".
## MessageActivity <a name="message"></a>
(***не реализовано***)
## ProfileFragment <a name="profile"></a>
Реализована кнопка выхода из аккаута, при нажатии на которую, пользователь выходит из аккаунта и ему открывается окно входа.  
[TODO: *сделать реализацию редактирования аккаунта, *]
## SearchActivity <a name="search"></a>
(***не реализовано***)
## SearchFriendActivity <a name="search-friend"></a>
В элементе searchview происходит проверка в реальном времени, если поле поиска не пустое, то появляется кнопка, запускающая поиск по введеному имени.  
В зависимости от введенной строки, из таблицы "users" из базы данных получается список пользователей, сортированный по имени, с помощью Firebase.  
У полученных пользователей есть кнопка добавить, которая добавляет выбранного пользователя в друзья к текущему пользователю через перезапись данных текущего пользователя в базе.
## SearchExercise <a name="search-exercise"></a>
(***не реализовано***)
